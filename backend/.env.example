# ============================================
# Nano Banana AI 后端环境配置文件
# ============================================
# 使用说明：
# 1. 复制此文件并重命名为 .env
# 2. 将下面的示例值替换为你的真实配置
# 3. .env 文件包含敏感信息，请勿提交到 Git 仓库
# ============================================

# --------------------------------------------
# 后端服务配置
# --------------------------------------------

# HOST - 服务器监听地址
# 默认值：localhost（仅本机访问）
# 设置为 0.0.0.0 可允许局域网访问
HOST=0.0.0.0

# PORT - 后端服务监听端口
# 默认值：3002
PORT=3002

# NODE_ENV - 运行环境
# 可选值：development（开发环境）、production（生产环境）、test（测试环境）
NODE_ENV=development

# FRONTEND_URL - 前端应用地址
# 用于配置 CORS 跨域请求，允许前端访问后端 API
FRONTEND_URL=http://localhost:3000

# --------------------------------------------
# Nano Banana AI API 配置
# --------------------------------------------

# NANO_BANANA_API_KEY - AI 绘图 API 密钥
# 从 Nano Banana 平台获取，用于调用 AI 绘图接口
NANO_BANANA_API_KEY=your_api_key_here

# NANO_BANANA_API_URL - AI 绘图 API 地址
# 默认使用国内直连地址
NANO_BANANA_API_URL=https://grsai.dakka.com.cn/v1/draw

# --------------------------------------------
# 运行模式配置
# --------------------------------------------

# STORAGE_MODE - 存储模式
# 可选值：oss（阿里云 OSS）、local（本地 NAS 存储）
# 默认值：oss
STORAGE_MODE=oss

# DATABASE_MODE - 数据库模式
# 可选值：mysql（云端 MySQL）、sqlite（本地 SQLite）
# 默认值：mysql
DATABASE_MODE=mysql

# --------------------------------------------
# 本地存储配置（STORAGE_MODE=local 时使用）
# --------------------------------------------

# LOCAL_STORAGE_PATH - 本地图片存储路径
# 建议使用 NAS 挂载路径，容量大且方便共享
# macOS 示例：/Volumes/NAS/nano-banana/images
# Windows 示例：D:\NAS\nano-banana\images
# Linux 示例：/mnt/nas/nano-banana/images
LOCAL_STORAGE_PATH=/Volumes/NAS/nano-banana/images

# LOCAL_SERVER_URL - 本地服务器访问地址
# 用于生成图片访问 URL，需要包含协议和端口
# 局域网访问时使用服务器的局域网 IP
LOCAL_SERVER_URL=http://192.168.1.100:3002

# --------------------------------------------
# SQLite 配置（DATABASE_MODE=sqlite 时使用）
# --------------------------------------------

# SQLITE_PATH - SQLite 数据库文件路径
# 建议放在本地 SSD，不要放 NAS（性能和锁问题）
# 默认值：./data/database.sqlite
SQLITE_PATH=./data/database.sqlite

# --------------------------------------------
# 数据库备份配置（DATABASE_MODE=sqlite 且 STORAGE_MODE=local 时使用）
# --------------------------------------------

# DB_BACKUP_MAX_COUNT - 保留的备份数量
# 超过此数量的旧备份会被自动删除
# 默认值：10
DB_BACKUP_MAX_COUNT=10

# DB_BACKUP_INTERVAL - 自动备份间隔（毫秒）
# 默认值：3600000（1小时）
# 设置为 0 禁用自动备份
# 常用值：
#   1800000 = 30分钟
#   3600000 = 1小时
#   86400000 = 24小时
DB_BACKUP_INTERVAL=3600000

# --------------------------------------------
# 数据库配置（MySQL / 阿里云 RDS）
# DATABASE_MODE=mysql 时使用
# --------------------------------------------

# DB_HOST - 数据库主机地址
# 本地开发可使用 localhost，生产环境使用阿里云 RDS 地址
# 阿里云 RDS 地址格式：your-instance-id.mysql.rds.aliyuncs.com
DB_HOST=your-rds-host.mysql.rds.aliyuncs.com

# DB_PORT - 数据库端口
# MySQL 默认端口为 3306
DB_PORT=3306

# DB_DATABASE - 数据库名称
# 需要预先在数据库中创建此数据库
DB_DATABASE=nano_banana_ai

# DB_USERNAME - 数据库用户名
# 建议使用专用账号，不要使用 root
DB_USERNAME=your_username

# DB_PASSWORD - 数据库密码
# 请使用强密码，包含大小写字母、数字和特殊字符
DB_PASSWORD=your_password

# DB_SSL - 是否启用 SSL 连接
# 阿里云 RDS 建议启用 SSL 以保证数据传输安全
# 可选值：true（启用）、false（禁用）
DB_SSL=true

# --------------------------------------------
# 阿里云 OSS 云存储配置
# --------------------------------------------

# OSS_REGION - OSS 存储区域
# 常用区域：
#   oss-cn-hangzhou（华东1-杭州）
#   oss-cn-shanghai（华东2-上海）
#   oss-cn-beijing（华北2-北京）
#   oss-cn-shenzhen（华南1-深圳）
#   oss-cn-hongkong（中国香港）
OSS_REGION=oss-cn-shenzhen

# OSS_BUCKET - OSS 存储桶名称
# 在阿里云 OSS 控制台创建的 Bucket 名称
OSS_BUCKET=your-bucket-name

# OSS_ACCESS_KEY_ID - 阿里云 AccessKey ID
# 建议使用 RAM 子账号的 AccessKey，而非主账号
# 在阿里云控制台 -> AccessKey 管理中获取
OSS_ACCESS_KEY_ID=your_access_key_id

# OSS_ACCESS_KEY_SECRET - 阿里云 AccessKey Secret
# 与 AccessKey ID 配对使用，请妥善保管
OSS_ACCESS_KEY_SECRET=your_access_key_secret

# OSS_ENDPOINT - OSS 访问域名
# 格式：https://{region}.aliyuncs.com
# 会根据 OSS_REGION 自动生成，也可手动指定
OSS_ENDPOINT=https://oss-cn-shenzhen.aliyuncs.com

# --------------------------------------------
# 安全配置
# --------------------------------------------

# JWT_SECRET - JWT 令牌签名密钥
# 用于签名和验证用户认证令牌
# 要求：至少 32 个字符的强密钥
# 生成方法：openssl rand -hex 32
# 警告：一旦设置后请勿更改，否则所有已登录用户将被强制退出
JWT_SECRET=your-jwt-secret-key-at-least-32-characters

# JWT_EXPIRES_IN - JWT 令牌过期时间
# 默认值：7d（7天）
# 可选值：1h（1小时）、1d（1天）、7d（7天）、30d（30天）
JWT_EXPIRES_IN=7d

# ENCRYPTION_KEY - 数据加密密钥
# 用于加密存储在数据库中的敏感数据
# 要求：32 个字符的强密钥
# 生成方法：openssl rand -hex 16
# 警告：一旦设置后请勿更改，否则已加密的数据将无法解密
ENCRYPTION_KEY=your-32-character-encryption-key-here

# --------------------------------------------
# 文件上传配置
# --------------------------------------------

# MAX_FILE_SIZE - 最大文件上传大小（字节）
# 默认值：10485760（10MB）
# 计算方式：10 * 1024 * 1024 = 10485760
MAX_FILE_SIZE=10485760

# ALLOWED_FILE_TYPES - 允许上传的文件类型
# 多个类型用逗号分隔
# 支持的图片格式：image/jpeg, image/png, image/webp, image/gif
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/webp
